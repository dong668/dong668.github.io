<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>员工端－司机登录页面</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link id="android" rel="stylesheet" type="text/css" charset="utf-8" href="css/style.css" />

		<script type="text/javascript" src="js/jquery-1.11.0.js"></script>
		<script type="text/javascript" src="js/mui.min.js"></script>
		<script type="text/javascript" src="utilsJs/constant.js"></script>
		<script type="text/javascript" src="utilsJs/sha1.js"></script>
		<script type="text/javascript" src="utilsJs/map.js"></script>
		<script type="text/javascript" src="utilsJs/httpUtils.js"></script>
		<script type="text/javascript" src="utilsJs/utils.js"></script>
		<script type="text/javascript" src="utilsJs/dpHttp.js"></script>
		<script type="text/javascript" src="utilsJs/websql.js"></script>

	</head>
	<script type="text/javascript">
		document.documentElement.style.fontSize = document.documentElement.clientWidth / 3.75 + "px";
		var phone = null;
		var passWord = null;
		var utils = null;
		var httpUtils = null;
		var dpHttp = null;
		(function($, doc) {
			$.plusReady(function() {
				var backButtonPress = 0;
				$.back = function(event) {
					backButtonPress++;
					if(backButtonPress > 1) {
						plus.runtime.quit();
					} else {
						ApiConfig.staticShowToast('再按一次退出应用');
					}
					setTimeout(function() {
						backButtonPress = 0;
					}, 1000);
					return false;
				};
			});
		}(mui, document));
		/**
		 * 验证手机号的正则表达式和位数
		 */
		function checkPhone() {
			phone = document.getElementById("phone");
			passWord = document.getElementById("passWord");
			var rPhone = /^1/;
			//			if(phone.value.length == 0) {
			//				ApiConfig.staticShowToast('您必须填写手机号');
			//				return false;
			//			} else if(phone.value.length != 11) {
			//				ApiConfig.staticShowToast('您输入的手机号位数不对');
			//				return false;
			//			} else if(!rPhone.test(phone.value)) {
			//				ApiConfig.staticShowToast('您输入的手机号必须以1开头');
			//				return false;
			//			} else if(isNaN(phone.value)) {
			//				ApiConfig.staticShowToast('请输入正确的手机号');
			//				return false;
			//			}
			return true;
		}
		/**
		 * 登陆
		 */
		function login() {
			if(!checkPhone()) {
				return false;
			} else if(passWord.value.length <= 0) {
				plus.nativeUI.toast("输入密码不能为空", {
					duration: "short"
				});
				return false;
			}
			dpHttp.login(phone.value, passWord.value, function(responseJson) {
				mui.openWindow({
					url: 'plus/main.html',
					id: 'main',
					styles: {
						popGesture: 'none'
					},
					show: {
						aniShow: 'pop-in'
					},
					waiting: {
						autoShow: false
					}
				});
			}, function(errorJson) {

			});
		}　　

		function plusReady() {
			utils = new Utils();
			httpUtils = new HttpUtils();
			dpHttp = new DpHttp(utils, httpUtils);
			httpUtils.checkAccessToken(function(responseJson) {
				var mainPage = mui.preload({
					"id": 'main',
					"url": 'plus/main.html',
					styles: {
						popGesture: 'none'
					},
					reload: true
				});
				var toMain = function() {
					mui.fire(mainPage, 'show', null);
					mui.openWindow({
						id: 'main',
						styles: {
							popGesture: 'none'
						},
						show: {
							aniShow: 'pop-in'
						},
						waiting: {
							autoShow: false
						}
					});
				};
				toMain();
			}, function(errorJson) {

			});
			switch(plus.os.name) {
				case "Android":
					$('#android').attr('href', 'css/style.css');
					break;
				case "iOS":
					$('#android').attr('href', 'css/ios.css');
					break;
			}
		}
		if(window.plus) {
			plusReady();
		} else {
			document.addEventListener("plusready", plusReady, false);
		}

		function closeme() {
			var ws = plus.webview.currentWebview();
			plus.webview.close(ws);
		}
	</script>

	<body>
		<div class="content">
			<div class="logo"><i class="logoCon"></i></div>
			<div class="loginUsername">
				<i class="left"></i>
				<!--<input id="phone" class="left" maxlength="11" type="tel" value="别清松（员工端）" placeholder="请输入您的手机号" />-->
				<input id="phone" class="left" maxlength="11" type="tel" placeholder="请输入您的手机号" />
			</div>
			<div class="loginPassword">
				<i class="left"></i>
				<!--<input id="passWord" class="left" type="password" value="070930" placeholder="请输入您的密码" ／>-->
				<input id="passWord" type="password" class="left" placeholder="请输入您的密码">
			</div>
			<a href="javascript:;" class="loginSubmit" onclick="login()">登录</a>
			<div class="loginFooter">
				<span>&copy;2015-2016</span>
				<span>Akimimi Tech.All Rihgts Reservec</span>
			</div>
		</div>

	</body>

</html>