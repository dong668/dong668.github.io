<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>员工端－消息列表</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

		<link id="phoneCss" rel="stylesheet" type="text/css" href="../css/style.css">
		<link rel="stylesheet" type="text/css" href="../css/mui.min.css">

		<script type="text/javascript" src="../js/jquery-1.11.0.js"></script>
		<script type="text/javascript" src="../js/mui.min.js "></script>
		<script type="text/javascript">
			//			if(window.plus) {
			//				plusReady();
			//			} else {
			//				document.addEventListener("plusready", plusReady, false);
			//			}

			//			function plusReady() {
			mui.init({
				pullRefresh: {
					height: 50, //可选,默认50.触发下拉刷新拖动距离,
					container: '#pullrefresh',
					down: {
						callback: pulldownRefresh
					},
					up: {
						height: 50, //可选,默认50.触发下拉刷新拖动距离,
						contentrefresh: '正在加载...',
						callback: pullupRefresh
					}
				}
			});
			//			}
			function pulldownRefresh() {
				setTimeout(function() {
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell mui-media');
					for(var i = cells.length, len = i + 3; i < len; i++) {
						var dl = document.createElement('dl');
						var dt = document.createElement('dt');
						var dd = document.createElement('dd');
						var div = document.createElement('div');
						var h3 = document.createElement('h3');
						var h4 = document.createElement('h4');
						var span = document.createElement('span');
						dl.className = 'news';
						dt.className = 'left';
						dd.className = 'left';
						div.className = 'noticeCon';
						h4.className = 'txtELlipse';
						span.className = 'right';

						dt.innerHTML = '<i class="notice"></i>';
						h3.innerText = '系统消息';
						h4.innerText = '加载您在车爵士汽车洗护中心刷卡洗车好多次，哈哈哈哈哈哈哈哈哈';
						span.innerText = '18:39';

						div.appendChild(h3);
						div.appendChild(h4);

						dd.appendChild(div);
						dd.appendChild(span);

						dl.appendChild(dt);
						dl.appendChild(dd);
						dl.addEventListener('tap', function() {
							mui.alert('刷新', '第' + $(this).index() + '个', function() {});
						});
						//下拉刷新，新纪录插到最前面；
						table.insertBefore(dl, table.firstChild);
					}
					mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
				}, 1500);
			}
			var count = 0;
			/**
			 * 上拉加载具体业务实现
			 */
			function pullupRefresh() {
				setTimeout(function() {
					mui('#pullrefresh').pullRefresh().endPullupToRefresh((++count > 2)); //参数为true代表没有更多数据了。
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell mui-media');
					for(var i = cells.length, len = i + 5; i < len; i++) {
						var dl = document.createElement('dl');
						var dt = document.createElement('dt');
						var dd = document.createElement('dd');
						var div = document.createElement('div');
						var h3 = document.createElement('h3');
						var h4 = document.createElement('h4');
						var span = document.createElement('span');
						dl.className = 'news';
						dt.className = 'left';
						dd.className = 'left';
						div.className = 'noticeCon';
						h4.className = 'txtELlipse';
						span.className = 'right';

						dt.innerHTML = '<i class="notice"></i>';
						h3.innerText = '系统消息';
						h4.innerText = '刷新您在车爵士汽车洗护中心刷卡洗车好多次，哈哈哈哈哈哈哈哈哈';
						span.innerText = '18:39';

						div.appendChild(h3);
						div.appendChild(h4);

						dd.appendChild(div);
						dd.appendChild(span);

						dl.appendChild(dt);
						dl.appendChild(dd);
						dl.addEventListener('tap', function() {
							mui.alert('加载', '第' + $(this).index() + '个', function() {});
						});
						table.appendChild(dl);
					}
				}, 1500);
			}
			if(mui.os.plus) {
				mui.plusReady(function() {
					setTimeout(function() {
						mui('#pullrefresh').pullRefresh().pullupLoading();
					}, 1000);
				});
			} else {
				mui.ready(function() {
					mui('#pullrefresh').pullRefresh().pullupLoading();
				});
			}
		</script>
	</head>

	<body>
		<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				<!--数据列表-->
				<div class="mui-table-view mui-table-view-chevron">

				</div>
			</div>
		</div>
	</body>

</html>
<script type="text/javascript">
	document.documentElement.style.fontSize = document.documentElement.clientWidth / 3.75 + "px";
</script>